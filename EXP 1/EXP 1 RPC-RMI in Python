# Server

import socket

def server_program():
    # get the hostname
    host = '127.0.0.1'
    port = 7000  # initiate port no above 1024

    server_socket = socket.socket()  # get instance
    server_socket.bind((host, port))  # bind host address and port together

    server_socket.listen(2)  # configure how many clients the server can listen to
    print("Waiting for connection...")
    conn, address = server_socket.accept()  # accept new connection
    print("Connection from: " + str(address))

    while True:
        data = conn.recv(53843).decode()  # receive data stream
        if not data:
            break  # if data is not received break
        print("From connected user: " + str(data))
        data = input(' -> ')  # input from server to send to client
        conn.send(data.encode())  # send data to the client

    conn.close()  # close the connection

if __name__ == '__main__':
    server_program()




# client


import socket

def client_program():
    host = '127.0.0.1'  # as both code is running on the same pc
    port = 7000  # socket server port number

    client_socket = socket.socket()  # instantiate
    client_socket.connect((host, port))  # connect to the server

    message = input(" -> ")  # take input

    while message.lower().strip() != 'bye':
        client_socket.send(message.encode())  # send message
        data = client_socket.recv(53843).decode()  # receive response

        print('Received from server: ' + data)  # show in terminal
        message = input(" -> ")  # again take input

    client_socket.close()  # close the connection

if __name__ == '__main__':
    client_program()
